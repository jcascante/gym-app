# Coach Workflow: Client Management and Program Assignment

## Overview

This document defines the coach-centric workflow for managing clients and assigning programs. The flow prioritizes simplicity and speed for coaches while capturing essential client data.

---

## Complete Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 1: Coach Views Client List                            â”‚
â”‚  - See all assigned clients                                  â”‚
â”‚  - Search/filter clients                                     â”‚
â”‚  - Click "Add New Client" or select existing client          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                               â”‚
          â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  New Client         â”‚      â”‚  Existing Client        â”‚
â”‚                     â”‚      â”‚                         â”‚
â”‚  - Enter email      â”‚      â”‚  - Load profile         â”‚
â”‚  - Check if exists  â”‚      â”‚  - View history         â”‚
â”‚  - Create account   â”‚      â”‚  - See current programs â”‚
â”‚  - Minimal profile  â”‚      â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                               â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 2: Coach Builds Program                               â”‚
â”‚  - Select program builder type (Strength, Hypertrophy, etc) â”‚
â”‚  - Fill in program parameters                                â”‚
â”‚  - Use client data if available (1RMs, preferences)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 3: Generate Preview                                    â”‚
â”‚  - Backend generates full program                            â”‚
â”‚  - Shows all weeks, days, exercises                          â”‚
â”‚  - Displays calculated weights, sets, reps                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 4: Coach Reviews and Adjusts                          â”‚
â”‚  - Preview full 8-week program                               â”‚
â”‚  - Make adjustments:                                         â”‚
â”‚    â€¢ Modify exercise weights                                 â”‚
â”‚    â€¢ Change exercise selection                               â”‚
â”‚    â€¢ Adjust sets/reps                                        â”‚
â”‚    â€¢ Add notes/cues                                          â”‚
â”‚  - Approve program                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 5: Assign Program to Client                           â”‚
â”‚  - Set start date                                            â”‚
â”‚  - Add assignment notes                                      â”‚
â”‚  - Confirm assignment                                        â”‚
â”‚  - Client receives notification                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RESULT: Client has active program                           â”‚
â”‚  - Client can view program in their dashboard                â”‚
â”‚  - Client can start logging workouts                         â”‚
â”‚  - Coach can monitor progress                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Step 1: Client Selection/Creation

### Coach Dashboard - Client List View

```typescript
interface ClientListView {
  // Coach sees their assigned clients
  clients: Array<{
    id: string;
    name: string;
    email: string;
    profilePhoto?: string;
    activePrograms: number;
    lastWorkout?: Date;
    status: 'active' | 'inactive' | 'new';
  }>;

  actions: {
    addNewClient: () => void;
    selectClient: (clientId: string) => void;
    searchClients: (query: string) => void;
  };
}
```

**UI Layout:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  My Clients                          [+ Add New Client]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  ğŸ” Search clients...                                  â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ‘¤ John Doe (john@email.com)                    â”‚  â”‚
â”‚  â”‚    Active: "8-Week Strength" - Week 3/8         â”‚  â”‚
â”‚  â”‚    Last workout: 2 days ago                     â”‚  â”‚
â”‚  â”‚    [View Progress] [Build New Program]          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ‘¤ Jane Smith (jane@email.com)                  â”‚  â”‚
â”‚  â”‚    No active program                             â”‚  â”‚
â”‚  â”‚    Last workout: 1 week ago                     â”‚  â”‚
â”‚  â”‚    [View Profile] [Build Program]               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ‘¤ Mike Johnson (mike@email.com) ğŸ†•            â”‚  â”‚
â”‚  â”‚    Just added - No program yet                   â”‚  â”‚
â”‚  â”‚    [Complete Profile] [Build Program]           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Add New Client Flow

**Option A: Client Already Exists (Invitation Flow)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Add New Client                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  Email: [________________]  [Check]    â”‚
â”‚                                         â”‚
â”‚  âœ… Found: John Doe (john@email.com)   â”‚
â”‚  Currently working with Coach Sarah     â”‚
â”‚                                         â”‚
â”‚  [Send Connection Request]              â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Option B: New Client (Create Account)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Add New Client                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  Email: [________________]  [Check]    â”‚
â”‚                                         â”‚
â”‚  â„¹ï¸  No account found. Create new      â”‚
â”‚                                         â”‚
â”‚  First Name: [__________]              â”‚
â”‚  Last Name:  [__________]              â”‚
â”‚                                         â”‚
â”‚  â˜ Send welcome email with login       â”‚
â”‚                                         â”‚
â”‚  [Create Client]                        â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Minimal Client Data at Creation

When creating a new client, only require **essential** information:

```typescript
interface MinimalClientCreation {
  // Required
  email: string;
  firstName: string;
  lastName: string;

  // Optional (can be filled later)
  phoneNumber?: string;
  sendWelcomeEmail?: boolean;
}
```

**Backend API:**

```python
# POST /api/v1/coaches/me/clients
class CreateClientRequest(BaseModel):
    email: str = Field(..., regex=r'^[\w\.-]+@[\w\.-]+\.\w+$')
    first_name: str = Field(..., min_length=1, max_length=100)
    last_name: str = Field(..., min_length=1, max_length=100)
    phone_number: Optional[str] = None
    send_welcome_email: bool = True

class CreateClientResponse(BaseModel):
    client_id: str
    email: str
    name: str
    is_new: bool  # True if newly created, False if existing user
    profile_complete: bool  # Whether client has filled out full profile
```

---

## Step 2: Program Builder Parameters

### Program Builder Entry

After selecting a client, coach starts program builder:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Build Program for John Doe                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Select Program Type:                                   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ’ª STRENGTH  â”‚  â”‚ ğŸ‹ï¸ HYPERTROPHYâ”‚  â”‚ ğŸƒ CARDIO   â”‚ â”‚
â”‚  â”‚ Linear 5x5   â”‚  â”‚ Coming Soon   â”‚  â”‚ Coming Soon â”‚ â”‚
â”‚  â”‚ [Select] â†’   â”‚  â”‚               â”‚  â”‚             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Strength Builder Parameters (Simplified)

Focus on **essential parameters** that coach needs to provide:

```typescript
interface StrengthBuilderInputs {
  // Client reference
  clientId: string;

  // Program basic info
  programName?: string;  // Auto-generated if not provided
  startDate?: Date;  // Can be set now or at assignment

  // Movement selection (1-4 exercises)
  movements: Array<{
    exerciseName: string;  // "Squat", "Bench Press", "Deadlift", "Overhead Press"

    // Testing/baseline data
    oneRepMax: number;  // lbs or kg
    maxRepsAt80Percent: number;  // Result of 80% test
    targetWeight: number;  // 5x5 target weight

    // Optional customization
    notes?: string;
  }>;

  // Optional client context (if available)
  clientContext?: {
    experienceLevel?: 'beginner' | 'intermediate' | 'advanced';
    injuries?: string[];  // Simple list of injury notes
    equipmentRestrictions?: string[];
  };
}
```

### Program Builder UI Flow

**Step 1: Movement Selection**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 1: Select Movements (1-4)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  âœ… Squat                      [Remove]                â”‚
â”‚  âœ… Bench Press                [Remove]                â”‚
â”‚  âœ… Deadlift                   [Remove]                â”‚
â”‚  âœ… Overhead Press             [Remove]                â”‚
â”‚                                                         â”‚
â”‚  [+ Add Movement] (Max 4)                              â”‚
â”‚                                                         â”‚
â”‚  [Cancel]                            [Next: Test 1RM]â†’ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Step 2: Enter 1RM for Each Movement**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 2: Test 1RM - Squat                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Enter client's 1 Rep Max for Squat:                   â”‚
â”‚                                                         â”‚
â”‚  1RM: [315] lbs                                        â”‚
â”‚                                                         â”‚
â”‚  â„¹ï¸  This is the maximum weight the client can lift    â”‚
â”‚     for a single rep with good form.                    â”‚
â”‚                                                         â”‚
â”‚  ğŸ’¾ Save to client profile: â˜‘ï¸                         â”‚
â”‚                                                         â”‚
â”‚  [â† Back]                           [Next: Bench] â†’    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Step 3: Test 80% for Max Reps**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 3: Test 80% - Squat                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Calculated 80% of 1RM: 252 lbs                        â”‚
â”‚                                                         â”‚
â”‚  How many reps can client do at 252 lbs?               â”‚
â”‚                                                         â”‚
â”‚  Reps: [12]                                            â”‚
â”‚                                                         â”‚
â”‚  â„¹ï¸  This determines weekly progression rate:          â”‚
â”‚     12 reps = 3% weekly increase                        â”‚
â”‚                                                         â”‚
â”‚  [â† Back]                           [Next: Target] â†’   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Step 4: Set Target 5x5 Weight**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 4: Set Target - Squat                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Client will work towards 5 sets of 5 reps at:        â”‚
â”‚                                                         â”‚
â”‚  Target Weight: [275] lbs                              â”‚
â”‚                                                         â”‚
â”‚  â„¹ï¸  Recommended: 195 lbs (62% of 1RM)                 â”‚
â”‚     Program will build from 239 to 284 lbs            â”‚
â”‚                                                         â”‚
â”‚  [Use Recommended] [Manual Entry]                      â”‚
â”‚                                                         â”‚
â”‚  [â† Back]                      [Generate Program] â†’    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Backend Submission:**

```typescript
// POST /api/v1/programs/generate-preview
const programInputs = {
  clientId: "uuid-123",
  builderType: "strength_linear_5x5",
  movements: [
    {
      exerciseName: "Squat",
      oneRepMax: 315,
      maxRepsAt80Percent: 12,
      targetWeight: 275,
    },
    {
      exerciseName: "Bench Press",
      oneRepMax: 225,
      maxRepsAt80Percent: 10,
      targetWeight: 185,
    },
    // ... more movements
  ],
};

// Response includes full generated program
const preview: ProgramPreview = await generatePreview(programInputs);
```

---

## Step 3: Program Preview Generation

### Backend Generates Full Program

```python
# POST /api/v1/programs/generate-preview
@router.post("/programs/generate-preview")
async def generate_program_preview(
    inputs: ProgramInputs,
    current_user: User = Depends(get_current_coach)
):
    """
    Generate program preview without saving to database.
    Coach can review before final assignment.
    """
    # 1. Validate coach has access to this client
    await validate_coach_client_relationship(current_user.id, inputs.client_id)

    # 2. Fetch client data if available
    client = await get_client(inputs.client_id)
    client_profile = client.profile if client else {}

    # 3. Generate program using backend algorithm
    generator = StrengthProgramGenerator()
    program = generator.generate_program(inputs)

    # 4. Apply client-specific adjustments if data available
    if client_profile.get('health_info', {}).get('injuries'):
        program = apply_injury_modifications(program, client_profile)

    # 5. Return preview with metadata
    return {
        "preview": program,
        "metadata": {
            "total_weeks": 8,
            "total_sessions": 32,
            "exercises": [m.exercise_name for m in inputs.movements],
            "adjustments_applied": get_applied_adjustments(),
        },
        "warnings": get_warnings(client_profile),
    }
```

### Preview Response Structure

```typescript
interface ProgramPreview {
  // Generated program structure
  weeks: Array<{
    weekNumber: number;
    name: string;  // "Foundation Phase", "Building Phase", etc.
    days: Array<{
      dayNumber: number;
      name: string;  // "Session 1 - Heavy Day"
      suggestedDay: string;  // "Monday"
      exercises: Array<{
        exerciseName: string;  // "SQUAT" (uppercase = heavy)
        sets: number;
        reps: number;
        weightLbs: number;
        percentageOf1RM: number;
        notes?: string;
      }>;
    }>;
  }>;

  // Metadata
  metadata: {
    totalWeeks: number;
    totalSessions: number;
    exercises: string[];
    algorithmVersion: string;
    adjustmentsApplied: string[];
  };

  // Warnings for coach
  warnings?: string[];  // e.g., "Client profile incomplete", "No injury data"
}
```

---

## Step 4: Coach Reviews and Adjusts Program

### Program Preview UI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Program Preview: 8-Week Linear Strength                       â”‚
â”‚  For: John Doe                                      [Edit Info]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  âš ï¸  Client profile incomplete - Add injury information        â”‚
â”‚                                                                 â”‚
â”‚  [Week 1] [Week 2] [Week 3] [Week 4] [Week 5] [Week 6] ...   â”‚
â”‚  â–¼ Week 1: Foundation Phase                                    â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ“… Day 1 - Monday - Heavy Day               [Edit Day] â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ 1. SQUAT                                     [Edit]     â”‚  â”‚
â”‚  â”‚    5 sets Ã— 5 reps @ 239 lbs (76% of 1RM)             â”‚  â”‚
â”‚  â”‚    Rest: 3 min                                          â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚ 2. BENCH PRESS                               [Edit]     â”‚  â”‚
â”‚  â”‚    5 sets Ã— 5 reps @ 157 lbs (70% of 1RM)             â”‚  â”‚
â”‚  â”‚    Rest: 3 min                                          â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚ 3. DEADLIFT                                  [Edit]     â”‚  â”‚
â”‚  â”‚    5 sets Ã— 5 reps @ 275 lbs (73% of 1RM)             â”‚  â”‚
â”‚  â”‚    Rest: 3 min                                          â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚ 4. OVERHEAD PRESS                            [Edit]     â”‚  â”‚
â”‚  â”‚    5 sets Ã— 5 reps @ 99 lbs (68% of 1RM)              â”‚  â”‚
â”‚  â”‚    Rest: 3 min                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ“… Day 2 - Wednesday - Light Day            [Edit Day] â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ 1. squat                                     [Edit]     â”‚  â”‚
â”‚  â”‚    5 sets Ã— 5 reps @ 191 lbs (80% of heavy day)       â”‚  â”‚
â”‚  â”‚    ...                                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚  [< Previous Week] [Next Week >]                               â”‚
â”‚                                                                 â”‚
â”‚  [Cancel]  [Regenerate]  [Save as Template]  [Assign to Client]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Adjustment Capabilities

**Exercise-Level Adjustments:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Edit Exercise: Squat (Week 1, Day 1)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  Exercise: [Squat â–¾]                   â”‚
â”‚    â†³ Replace with: Back Squat, Front  â”‚
â”‚      Squat, Leg Press                  â”‚
â”‚                                         â”‚
â”‚  Sets: [5]   Reps: [5]                 â”‚
â”‚                                         â”‚
â”‚  Weight: [239] lbs                     â”‚
â”‚  (76% of 1RM)                          â”‚
â”‚                                         â”‚
â”‚  Rest: [180] seconds                   â”‚
â”‚                                         â”‚
â”‚  Tempo: [3-0-1-0]  (optional)          â”‚
â”‚  RPE: [7-8]        (optional)          â”‚
â”‚                                         â”‚
â”‚  Notes/Cues:                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Focus on depth and bar path    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  [Cancel]              [Save Changes]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Day-Level Adjustments:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Edit Day: Week 1, Day 1 (Monday)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  Day Name: [Session 1 - Heavy Day]    â”‚
â”‚                                         â”‚
â”‚  Suggested Day: [Monday â–¾]             â”‚
â”‚                                         â”‚
â”‚  Add Exercise: [+ Add Exercise]        â”‚
â”‚                                         â”‚
â”‚  Current Exercises:                     â”‚
â”‚  1. â˜° Squat (5x5 @ 239 lbs) [Edit][Ã—] â”‚
â”‚  2. â˜° Bench (5x5 @ 157 lbs) [Edit][Ã—] â”‚
â”‚  3. â˜° Deadlift (5x5 @ 275)[Edit][Ã—]   â”‚
â”‚  4. â˜° OHP (5x5 @ 99 lbs)   [Edit][Ã—]  â”‚
â”‚                                         â”‚
â”‚  â„¹ï¸  Drag to reorder                    â”‚
â”‚                                         â”‚
â”‚  Warm-up Notes:                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 5 min bike, dynamic stretches  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  [Cancel]              [Save Changes]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Bulk Adjustments:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Bulk Adjustments                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  Apply to: â˜‘ï¸ All Weeks                â”‚
â”‚                                         â”‚
â”‚  Adjustment Type:                       â”‚
â”‚  âšª Increase all weights by [5] lbs    â”‚
â”‚  âšª Decrease all weights by [5] lbs    â”‚
â”‚  âšª Scale all weights by [90]%         â”‚
â”‚  âš« Add exercise to all heavy days     â”‚
â”‚                                         â”‚
â”‚  Exercise: [Pull-ups â–¾]                â”‚
â”‚  Sets: [3]  Reps: [8-10]               â”‚
â”‚  Weight: [Bodyweight]                   â”‚
â”‚                                         â”‚
â”‚  [Cancel]                     [Apply]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Adjustment Tracking

Track what coach changed from original generated program:

```typescript
interface ProgramAdjustments {
  programId: string;
  originalGenerated: ProgramPreview;  // Store original
  adjustments: Array<{
    timestamp: Date;
    adjustedBy: string;  // Coach ID
    adjustmentType: 'exercise_modified' | 'exercise_added' | 'exercise_removed' | 'weight_changed' | 'sets_reps_changed';
    location: {
      weekNumber: number;
      dayNumber: number;
      exerciseIndex?: number;
    };
    before: any;
    after: any;
    reason?: string;  // Optional note from coach
  }>;
}
```

---

## Step 5: Assign Program to Client

### Assignment Modal

After coach approves the program:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Assign Program to John Doe                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Program: 8-Week Linear Strength                       â”‚
â”‚  Duration: 8 weeks, 4 sessions/week                    â”‚
â”‚                                                         â”‚
â”‚  âš ï¸  Client has active program: "Beginner Program"     â”‚
â”‚     âšª Replace active program                          â”‚
â”‚     âš« Schedule after current program ends (Mar 15)    â”‚
â”‚                                                         â”‚
â”‚  Start Date: [2025-03-15 â–¾]                           â”‚
â”‚  End Date: May 10, 2025 (calculated)                   â”‚
â”‚                                                         â”‚
â”‚  Assignment Notes (visible to client):                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Focus on form over weight. Don't rush the     â”‚   â”‚
â”‚  â”‚ progression. Take rest days seriously!         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  Notification:                                          â”‚
â”‚  â˜‘ï¸ Send email to client                               â”‚
â”‚  â˜‘ï¸ Send in-app notification                           â”‚
â”‚                                                         â”‚
â”‚  [Cancel]  [Save as Template]  [Assign Program] â†’     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Assignment API

```python
# POST /api/v1/programs/{programId}/assign
class AssignProgramRequest(BaseModel):
    client_id: str
    start_date: date
    replace_active: bool = False  # Replace existing active program
    assignment_notes: Optional[str] = None
    send_notification: bool = True

class AssignProgramResponse(BaseModel):
    assignment_id: str
    program_id: str
    client_id: str
    start_date: date
    end_date: date  # Calculated
    status: str  # "scheduled" or "active"
    notification_sent: bool

@router.post("/programs/{program_id}/assign")
async def assign_program_to_client(
    program_id: str,
    request: AssignProgramRequest,
    current_user: User = Depends(get_current_coach),
    db: AsyncSession = Depends(get_db)
):
    """Assign generated program to client."""

    # 1. Validate coach-client relationship
    await validate_coach_client_relationship(current_user.id, request.client_id)

    # 2. Get program (must be owned by this coach)
    program = await get_program(program_id)
    if program.created_by_user_id != current_user.id:
        raise HTTPException(403, "Not your program")

    # 3. Check for existing active program
    if request.replace_active:
        await deactivate_client_programs(request.client_id)

    # 4. Create assignment
    assignment = ClientProgramAssignment(
        subscription_id=current_user.subscription_id,
        program_id=program_id,
        client_id=request.client_id,
        assigned_by=current_user.id,
        start_date=request.start_date,
        scheduled_end_date=request.start_date + timedelta(weeks=program.duration_weeks),
        status='active' if request.start_date <= date.today() else 'scheduled',
        assignment_notes=request.assignment_notes,
    )
    db.add(assignment)
    await db.commit()

    # 5. Send notifications
    if request.send_notification:
        await send_program_assignment_notification(
            client_id=request.client_id,
            program_name=program.name,
            coach_name=current_user.profile.get('first_name'),
            start_date=request.start_date,
            notes=request.assignment_notes,
        )

    return AssignProgramResponse(
        assignment_id=str(assignment.id),
        program_id=str(program_id),
        client_id=request.client_id,
        start_date=request.start_date,
        end_date=assignment.scheduled_end_date,
        status=assignment.status,
        notification_sent=request.send_notification,
    )
```

---

## Additional Flows

### Save as Template (Optional)

Before or after assignment, coach can save as reusable template:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Save as Template                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  Template Name:                         â”‚
â”‚  [8-Week Linear Strength - Custom]     â”‚
â”‚                                         â”‚
â”‚  Description (optional):                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Modified version with extra    â”‚   â”‚
â”‚  â”‚ accessory work for hypertrophy â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  Visibility:                            â”‚
â”‚  âš« Private (only me)                   â”‚
â”‚  âšª Shared (all coaches in gym)        â”‚
â”‚                                         â”‚
â”‚  Tags:                                  â”‚
â”‚  [strength] [intermediate] [custom]    â”‚
â”‚  [+ Add tag]                            â”‚
â”‚                                         â”‚
â”‚  [Cancel]              [Save Template] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Client Receives Notification

**Email:**
```
Subject: New Training Program Assigned! ğŸ’ª

Hi John,

Coach Mike has assigned you a new training program:

Program: 8-Week Linear Strength
Start Date: March 15, 2025
Duration: 8 weeks
Frequency: 4 workouts per week

Coach's Message:
"Focus on form over weight. Don't rush the progression.
Take rest days seriously!"

[View Program] [Download PDF]

Questions? Reply to this email or message Coach Mike in the app.

Train hard!
```

**In-App Notification:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”” New Program Assigned                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  Coach Mike assigned:                   â”‚
â”‚  "8-Week Linear Strength"              â”‚
â”‚                                         â”‚
â”‚  Starts: March 15, 2025                â”‚
â”‚  4 workouts/week                        â”‚
â”‚                                         â”‚
â”‚  [View Program] [Dismiss]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Summary of Updated Flow

### Simplified Workflow

1. **Coach selects/creates client** (minimal info: email, name)
2. **Coach builds program** (enters movement data and parameters)
3. **System generates preview** (full 8-week program calculated)
4. **Coach reviews and adjusts** (modify exercises, weights, notes)
5. **Coach assigns to client** (set start date, add notes)
6. **Client receives program** (notification + access in their app)

### Key Design Principles

âœ… **Coach-centric**: Coach drives the entire flow
âœ… **Minimal friction**: Don't require full client profile upfront
âœ… **Preview first**: Always show coach what will be assigned
âœ… **Flexible adjustments**: Coach can modify anything in preview
âœ… **Progressive enhancement**: Can add more client data later for better personalization
âœ… **Clear state management**: Track original vs adjusted program

### Data Requirements

**At Client Creation** (minimal):
- Email (required)
- First Name (required)
- Last Name (required)

**At Program Building** (coach provides):
- Movement selection
- 1RMs
- 80% rep test results
- Target weights

**Enhanced Later** (optional, improves future programs):
- Client injuries
- Equipment restrictions
- Training preferences
- Full anthropometric data

This flow prioritizes speed and simplicity while maintaining the ability to add more sophisticated personalization as the coach-client relationship develops.
